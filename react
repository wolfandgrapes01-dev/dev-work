import axios from "axios";
import { useState } from "react";
import { useNavigate } from "react-router-dom";

type A = { /* æ¥å£ A çš„ç»“æ„ */ }
type B = { /* æ¥å£ B çš„ç»“æ„ */ }
type C = { /* æ¥å£ C çš„ç»“æ„ */ }

export default function Page() {
  const [loading, setLoading] = useState(false);
  const navigate = useNavigate();

  const handleClick = async () => {
    if (loading) return;     // é˜²æ­¢é‡å¤ç‚¹å‡»
    setLoading(true);

    try {
      const [a, b, c] = await Promise.all([
        axios.get<A>("/api/a"),
        axios.get<B>("/api/b"),
        axios.get<C>("/api/c"),
      ]);

      console.log(a.data, b.data, c.data);

      // ğŸ”¥ æ‰€æœ‰æ¥å£æˆåŠŸ â†’ è¿›è¡Œé¡µé¢è·³è½¬
      navigate("/next-page", {
        state: {
          a: a.data,
          b: b.data,
          c: c.data
        }
      });

    } catch (err) {
      console.error("æ¥å£å¤±è´¥ï¼š", err);
      alert("æœ‰æ¥å£å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•");
    } finally {
      setLoading(false);
    }
  };

  return (
    <button onClick={handleClick} disabled={loading}>
      {loading ? "è¯·æ±‚ä¸­..." : "ç‚¹å‡»è·å–å¹¶è·³è½¬"}
    </button>
  );
}